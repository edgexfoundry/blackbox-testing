{
	"info": {
		"_postman_id": "fbc3e911-ffc5-4a2b-998f-da0096d1bfed",
		"name": "\b\bsupport-notifications-importer",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Import subscriptions",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8fbfbf8d-1505-48ae-af9e-dc6b532889b4",
						"exec": [
							"// Prepare test data",
							"var data = [",
							"{",
							"    \"slug\": \"group-a-member\",",
							"    \"receiver\": \"Group A Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"temperature\",",
							"        \"humidity\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"andy@abc.def\",",
							"                \"tom@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-b-member\",",
							"    \"receiver\": \"Group B Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"temperature\",",
							"        \"humidity\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"john@abc.def\",",
							"                \"sam@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-c-member\",",
							"    \"receiver\": \"Group C Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"temperature\",",
							"        \"humidity\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"karl@abc.def\",",
							"                \"jeff@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-d-member\",",
							"    \"receiver\": \"Group D Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"temperature\",",
							"        \"humidity\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"davis@abc.def\",",
							"                \"david@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-e-member\",",
							"    \"receiver\": \"Group E Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"temperature\",",
							"        \"humidity\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"elliot@abc.def\",",
							"                \"elvin@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-f-member\",",
							"    \"receiver\": \"Group F Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"temperature\",",
							"        \"humidity\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"fred@abc.def\",",
							"                \"jeff@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-g-member\",",
							"    \"receiver\": \"Group G Member\",",
							"    \"subscribedCategories\": [",
							"        \"SW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"memory\",",
							"        \"cpu\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"gary@abc.def\",",
							"                \"grace@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-h-member\",",
							"    \"receiver\": \"Group H Member\",",
							"    \"subscribedCategories\": [",
							"        \"SW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"network\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"howard@abc.def\",",
							"                \"henry@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-i-member\",",
							"    \"receiver\": \"Group I Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"sensor\",",
							"        \"cpu\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"ava@abc.def\",",
							"                \"Allison@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-j-member\",",
							"    \"receiver\": \"Group J Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"battery\",",
							"        \"sensor\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"joseph@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-k-member\",",
							"    \"receiver\": \"Group K Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"sensor\",",
							"        \"cpu\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"kevin@abc.def\",",
							"                \"karen@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-l-member\",",
							"    \"receiver\": \"Group L Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"battery\",",
							"        \"sensor\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"lisa@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-m-member-sw\",",
							"    \"receiver\": \"Group M Member\",",
							"    \"subscribedCategories\": [",
							"        \"SW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"cpu\",",
							"        \"memory\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"lisa@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"group-m-member-hw\",",
							"    \"receiver\": \"Group M Member\",",
							"    \"subscribedCategories\": [",
							"        \"HW_HEALTH\"",
							"    ],",
							"    \"subscribedLabels\": [",
							"        \"battery\",",
							"        \"sensor\"",
							"    ],",
							"    \"channels\": [",
							"        {",
							"            \"type\": \"EMAIL\",",
							"            \"mailAddresses\": [",
							"                \"lisa@abc.def\"",
							"            ]",
							"        }",
							"    ]",
							"}",
							"];",
							"",
							"pm.environment.set(\"data\", data);",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "47de7093-d096-4c92-83f4-3f06215ecf31",
						"exec": [
							"var baseUrl = pm.environment.get(\"supportNotificationsUrl\");",
							"var data = pm.environment.get(\"data\");",
							"var request = {",
							"  url: baseUrl+'/api/v1/subscription',",
							"  method: 'POST',",
							"  body: {",
							"    mode: 'raw',",
							"    raw: 'json string'",
							"  }",
							"};",
							"",
							"var count = 0;",
							"var failedCount = 0;",
							"data.forEach(function(item, index) { ",
							"    request.body.raw = JSON.stringify(item)",
							"    pm.sendRequest(request, function (err, res) {",
							"        if (res.code!=200 ) {",
							"            console.log(index, res.stream.toString());",
							"            failedCount++",
							"        }else{",
							"            count++",
							"        }",
							"    });",
							"});",
							"",
							"// Wait for API calls finish.",
							"var interval = setInterval(function(){",
							"    if(count+failedCount == data.length){",
							"        clearInterval(interval);",
							"        console.log(count +\" rows imported\");",
							"        console.log(failedCount +\" rows import failed\");",
							"    }",
							"}, 500);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{supportNotificationsUrl}}/api/v1/ping",
					"host": [
						"{{supportNotificationsUrl}}"
					],
					"path": [
						"api",
						"v1",
						"ping"
					]
				}
			},
			"response": []
		},
		{
			"name": "Import notifications",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8fbfbf8d-1505-48ae-af9e-dc6b532889b4",
						"exec": [
							"// Prepare test data",
							"var data = [",
							"{",
							"    \"slug\": \"notice-001\",",
							"    \"sender\": \"System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's temperature is 82 °F\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"temperature\"",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"notice-003\",",
							"    \"sender\": \"System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's temperature is 82 °F\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"temperature\"",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"notice-004\",",
							"    \"sender\": \"System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's temperature is 82 °F\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"temperature\"",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"notice-005\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's temperature is 82 °F\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"temperature\"",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"notice-006\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's relative humidity is 60 %\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"humidity\"",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"notice-007\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's temperature is 82 °F\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"temperature\"",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"notice-008\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's temperature is 82 °F\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"temperature\"",
							"    ],",
							"    \"created\":1300000",
							"},",
							"{",
							"    \"slug\": \"notice-009\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's relative humidity is 60 %\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"humidity\"",
							"    ],",
							"    \"created\":1300100",
							"},",
							"{",
							"    \"slug\": \"notice-010\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's temperature is 82 °F\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"temperature\"",
							"    ],",
							"    \"created\":1300200",
							"},",
							"{",
							"    \"slug\": \"notice-011\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's temperature is 82 °F\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"temperature\"",
							"    ],",
							"    \"created\":1500001",
							"},",
							"{",
							"    \"slug\": \"notice-012\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Room's temperature is 82 °F\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"temperature\"",
							"    ],",
							"    \"created\":1599999",
							"},",
							"{",
							"    \"slug\": \"notice-013\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Power meter's counter value is 356 kWh\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"power-meter\"",
							"    ]",
							"},",
							"{",
							"    \"slug\": \"notice-014\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Power meter's counter value is 356 kWh\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"power-meter\"",
							"    ],",
							"    \"status\":\"NEW\"",
							"},",
							"{",
							"    \"slug\": \"notice-015\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Power meter's counter value is 356 kWh\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"power-meter\"",
							"    ],",
							"    \"status\":\"NEW\"",
							"},",
							"{",
							"    \"slug\": \"notice-016\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Power meter's counter value is 356 kWh\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"power-meter\"",
							"    ],",
							"    \"status\":\"PROCESSED\"",
							"},",
							"{",
							"    \"slug\": \"notice-017\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Power meter's counter value is 356 kWh\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"power-meter\"",
							"    ],",
							"    \"status\":\"PROCESSED\"",
							"},",
							"{",
							"    \"_id\": {",
							"        \"$oid\": \"57ba04a1189b95b8afcdafd4\"",
							"    },",
							"    \"slug\": \"notice-018\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Power meter's counter value is 356 kWh\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"power-meter\"",
							"    ],",
							"    \"status\":\"PROCESSED\"",
							"},",
							"{",
							"    \"slug\": \"notice-019\",",
							"    \"sender\": \"Room System Management\",",
							"    \"category\": \"HW_HEALTH\",",
							"    \"severity\": \"NORMAL\",",
							"    \"content\": \" [ Notification ] Power meter's counter value is 356 kWh\",",
							"    \"labels\": [",
							"        \"room\",",
							"        \"power-meter\"",
							"    ],",
							"    \"status\":\"PROCESSED\"",
							"}",
							"];",
							"",
							"pm.environment.set(\"data\", data);",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "47de7093-d096-4c92-83f4-3f06215ecf31",
						"exec": [
							"var baseUrl = pm.environment.get(\"supportNotificationsUrl\");",
							"var data = pm.environment.get(\"data\");",
							"var request = {",
							"  url: baseUrl+'/api/v1/notification',",
							"  method: 'POST',",
							"  body: {",
							"    mode: 'raw',",
							"    raw: 'json string'",
							"  }",
							"};",
							"",
							"var count = 0;",
							"var failedCount = 0;",
							"data.forEach(function(item, index) { ",
							"    request.body.raw = JSON.stringify(item)",
							"    pm.sendRequest(request, function (err, res) {",
							"        if (res.code!=202 ) {",
							"            console.log(index, res.stream.toString());",
							"            failedCount++",
							"        }else{",
							"            count++",
							"        }",
							"    });",
							"});",
							"",
							"// Wait for API calls finish.",
							"var interval = setInterval(function(){",
							"    if(count+failedCount == data.length){",
							"        clearInterval(interval);",
							"        console.log(count +\" rows imported\");",
							"        console.log(failedCount +\" rows import failed\");",
							"    }",
							"}, 500);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{supportNotificationsUrl}}/api/v1/ping",
					"host": [
						"{{supportNotificationsUrl}}"
					],
					"path": [
						"api",
						"v1",
						"ping"
					]
				}
			},
			"response": []
		},
		{
			"name": "Import transmissions",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "8fbfbf8d-1505-48ae-af9e-dc6b532889b4",
						"exec": [
							"// Prepare test data",
							"var data = [",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-020\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 0,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-020\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 0,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-021\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 0,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-021\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 0,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-021\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"TRXESCALATED\",",
							"    \"resendCount\": 0,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-021\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"FAILED\",",
							"    \"resendCount\": 1,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"FAILED\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-023\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 0,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-022\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"TRXESCALATED\",",
							"    \"resendCount\": 0,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"TRXESCALATED\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-020\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"ACKNOWLEDGED\",",
							"    \"resendCount\": 0,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-021\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"FAILED\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"FAILED\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"},",
							"{",
							"    \"notification\": {",
							"        \"slug\": \"notice-025\",",
							"        \"sender\": \"System Management\",",
							"        \"category\": \"HW_HEALTH\",",
							"        \"severity\": \"NORMAL\",",
							"        \"content\": \" [ Notification ] Room's temperature is 82 °F\"",
							"    },",
							"    \"receiver\": \"Jack\",",
							"    \"channel\": {",
							"        \"type\": \"REST\",",
							"        \"url\": \"http://localhost:5566/test\",",
							"        \"httpMethod\": \"POST\",",
							"    },",
							"    \"status\": \"SENT\",",
							"    \"resendCount\": 3,",
							"    \"records\": [",
							"        {",
							"            \"status\": \"SENT\",",
							"            \"response\": \"true\",",
							"            \"sent\": 1472439914709",
							"        }",
							"    ]",
							"}",
							"];",
							"",
							"pm.environment.set(\"data\", data);",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "47de7093-d096-4c92-83f4-3f06215ecf31",
						"exec": [
							"var baseUrl = pm.environment.get(\"supportNotificationsUrl\");",
							"var data = pm.environment.get(\"data\");",
							"var request = {",
							"  url: baseUrl+'/api/v1/transmission',",
							"  method: 'POST',",
							"  body: {",
							"    mode: 'raw',",
							"    raw: 'json string'",
							"  }",
							"};",
							"",
							"var count = 0;",
							"var failedCount = 0;",
							"data.forEach(function(item, index) { ",
							"    request.body.raw = JSON.stringify(item)",
							"    pm.sendRequest(request, function (err, res) {",
							"        if (res.code!=200 ) {",
							"            console.log(index, res.stream.toString());",
							"            failedCount++",
							"        }else{",
							"            count++",
							"        }",
							"    });",
							"});",
							"",
							"// Wait for API calls finish.",
							"var interval = setInterval(function(){",
							"    if(count+failedCount == data.length){",
							"        clearInterval(interval);",
							"        console.log(count +\" rows imported\");",
							"        console.log(failedCount +\" rows import failed\");",
							"    }",
							"}, 500);",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{supportNotificationsUrl}}/api/v1/ping",
					"host": [
						"{{supportNotificationsUrl}}"
					],
					"path": [
						"api",
						"v1",
						"ping"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "9895fac7-3c08-4435-a3d4-f8e49206b681",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "0ac20a84-512f-47d0-8ede-206fda755218",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}
